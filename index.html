<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SHERLOK PIZZA üçï</title>
<style>
  * {
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
  }
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: radial-gradient(circle at top left, #ff8c00, #ff3c00);
    overflow-x: hidden;
  }
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #fff;
  }
  .container {
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    width: 90%;
    max-width: 420px;
    box-shadow: 0 0 25px rgba(0,0,0,0.2);
    animation: fadeIn 1s ease;
    position: relative;
    z-index: 2;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.9);}
    to { opacity: 1; transform: scale(1);}
  }
  h1 {
    font-size: 28px;
    margin-bottom: 15px;
  }
  p {
    font-size: 18px;
    margin-bottom: 15px;
  }
  input {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: none;
    outline: none;
    font-size: 16px;
    text-align: center;
  }
  button {
    margin-top: 15px;
    padding: 12px 25px;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    font-weight: bold;
    background: #fff;
    color: #ff3c00;
    transition: 0.3s;
  }
  button:hover {
    background: #ffcd00;
    color: #000;
  }
  .hidden {
    display: none;
  }
  .pizza-emoji {
    font-size: 80px;
    animation: bounce 2s infinite;
  }
  @keyframes bounce {
    0%,100% { transform: translateY(0);}
    50% { transform: translateY(-10px);}
  }
  .timer {
    font-size: 20px;
    margin-top: 10px;
  }
  .delivery-msg {
    font-size: 18px;
    margin-top: 20px;
  }
  .promo-container {
    background: rgba(0,0,0,0.3);
    border-radius: 15px;
    padding: 20px;
    margin-top: 20px;
  }
  .promo-container h2 {
    font-size: 22px;
    margin-bottom: 10px;
  }
  .promo-container p {
    font-size: 16px;
    margin-bottom: 10px;
  }
  .promo-container input {
    background: #fff;
    color: #000;
  }
  .orders {
    font-size: 16px;
    margin-top: 15px;
    color: #fff;
  }
  .success {
    color: #0f0;
    margin-top: 10px;
  }
  .error {
    color: #ff6b6b;
    margin-top: 10px;
  }
  footer {
    margin-top: 25px;
    font-size: 14px;
    color: rgba(255,255,255,0.7);
  }
  .history {
    margin-top: 15px;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 10px;
    font-size: 14px;
    text-align: left;
    max-height: 150px;
    overflow-y: auto;
  }
  .glow {
    position: absolute;
    width: 400px;
    height: 400px;
    border-radius: 50%;
    background: rgba(255,255,255,0.08);
    filter: blur(120px);
    animation: moveGlow 12s infinite alternate;
    z-index: 0;
  }
  @keyframes moveGlow {
    0% { top: 10%; left: 10%; }
    100% { top: 60%; left: 70%; }
  }
  .stats {
    margin-top: 15px;
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    padding: 10px;
    font-size: 14px;
  }
  .stats p { margin: 5px 0; }
</style>
</head>
<body>
<div class="glow"></div>

<div class="container" id="mainMenu">
  <h1>üçï –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ SHERLOK PIZZA!</h1>
  <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∏—Ü—Ü—ã!</p>
  <button id="startBtn">–ó–∞–∫–∞–∑–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ø–∏—Ü—Ü—É</button>
  <div class="orders" id="orderCount"></div>
  <div class="stats" id="statsBlock">
    <p><b>–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤:</b> <span id="statTotal">0</span></p>
    <p><b>–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –ø–∏—Ü—Ü:</b> <span id="statDelivered">0</span></p>
  </div>
</div>

<div class="container hidden" id="telegramMenu">
  <h1>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Telegram —é–∑–µ—Ä</h1>
  <input type="text" id="telegramUser" placeholder="@username">
  <button id="sendPizzaBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
  <div class="error hidden" id="errorUser">–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —é–∑–µ—Ä–Ω–µ–π–º!</div>
</div>

<div class="container hidden" id="deliveryMenu">
  <h1>üçï –î–æ—Å—Ç–∞–≤–∫–∞ –ø–∏—Ü—Ü—ã</h1>
  <div class="pizza-emoji">üçï</div>
  <div class="timer" id="timerText">–û—Å—Ç–∞–ª–æ—Å—å: 20 —Å–µ–∫</div>
  <div class="delivery-msg" id="deliveryMsg">–ü–∏—Ü—Ü–∞ —É–∂–µ –≤ –ø—É—Ç–∏!</div>
</div>

<div class="container hidden" id="promoMenu">
  <h1>üéâ –í–∞—à–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h1>
  <p>–≤—Å–µ 20 –ø–∏—Ü—Ü –ø—Ä–∏—à–ª–∏ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é! üòã</p>
  <div class="promo-container">
    <h2>üî• –ü—Ä–æ–º–æ–∫–æ–¥—ã</h2>
    <p>–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –µ—â—ë –∑–∞–∫–∞–∑—ã –ø–∏—Ü—Ü—ã!</p>
    <input type="text" id="promoInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
    <button id="applyPromo">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    <p class="orders">–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥, –Ω–∞–ø–∏—à–∏—Ç–µ <b>@mr_sherlok</b></p>
    <div id="promoMsg"></div>
  </div>
  <div class="history" id="historyBlock">
    <b>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤:</b>
    <ul id="historyList"></ul>
  </div>
  <button id="backBtn">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<footer>¬© 2025 SHERLOK PIZZA üçï</footer>

<audio id="dingSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_33e7b024f3.mp3?filename=bell-1-74864.mp3"></audio>
<audio id="popSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4b12ed1b44.mp3?filename=button-click-145802.mp3"></audio>

<script>
  const startBtn = document.getElementById("startBtn");
  const telegramMenu = document.getElementById("telegramMenu");
  const mainMenu = document.getElementById("mainMenu");
  const sendPizzaBtn = document.getElementById("sendPizzaBtn");
  const deliveryMenu = document.getElementById("deliveryMenu");
  const promoMenu = document.getElementById("promoMenu");
  const telegramUser = document.getElementById("telegramUser");
  const timerText = document.getElementById("timerText");
  const errorUser = document.getElementById("errorUser");
  const promoInput = document.getElementById("promoInput");
  const applyPromo = document.getElementById("applyPromo");
  const promoMsg = document.getElementById("promoMsg");
  const backBtn = document.getElementById("backBtn");
  const orderCount = document.getElementById("orderCount");
  const statTotal = document.getElementById("statTotal");
  const statDelivered = document.getElementById("statDelivered");
  const historyList = document.getElementById("historyList");
  const dingSound = document.getElementById("dingSound");
  const popSound = document.getElementById("popSound");

  let orders = parseInt(localStorage.getItem("orders") || "0");
  let delivered = parseInt(localStorage.getItem("delivered") || "0");
  let gotFreePizza = localStorage.getItem("gotFreePizza") === "true";
  let promoUsed = localStorage.getItem("promoUsed") === "true";
  let history = JSON.parse(localStorage.getItem("history") || "[]");

  // –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –¥–∞—ë–º 1 –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–∫–∞–∑
  if (!localStorage.getItem("firstVisit")) {
    orders = 1;
    localStorage.setItem("orders", orders);
    localStorage.setItem("firstVisit", "true");
    addHistory("–ü–æ–ª—É—á–µ–Ω –ø–µ—Ä–≤—ã–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–∫–∞–∑ üçï");
  }

  // –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
  if (gotFreePizza) {
    mainMenu.classList.add("hidden");
    promoMenu.classList.remove("hidden");
  }

  function updateOrders() {
    orderCount.textContent = `–í–∞—à–∏ –∑–∞–∫–∞–∑—ã: ${orders}`;
    statTotal.textContent = orders;
    statDelivered.textContent = delivered;
    updateHistory();
  }

  function updateHistory() {
    historyList.innerHTML = "";
    history.slice(-10).reverse().forEach(h => {
      const li = document.createElement("li");
      li.textContent = h;
      historyList.appendChild(li);
    });
  }

  function addHistory(text) {
    history.push(text);
    if (history.length > 50) history.shift();
    localStorage.setItem("history", JSON.stringify(history));
  }

  updateOrders();

  startBtn.addEventListener("click", () => {
    popSound.play();
    if (orders > 0) {
      mainMenu.classList.add("hidden");
      telegramMenu.classList.remove("hidden");
    } else {
      alert("–£ –≤–∞—Å –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ @mr_sherlok üçï");
    }
  });

  sendPizzaBtn.addEventListener("click", () => {
    const user = telegramUser.value.trim();
    if (user.length < 3 || !user.startsWith("@")) {
      errorUser.classList.remove("hidden");
      return;
    }
    errorUser.classList.add("hidden");
    telegramMenu.classList.add("hidden");
    deliveryMenu.classList.remove("hidden");
    addHistory(`–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω –¥–ª—è ${user}`);
    startDelivery(user);
  });

  function startDelivery(user) {
    let timeLeft = 20;
    const msg = document.getElementById("deliveryMsg");
    msg.textContent = `–ü–∏—Ü—Ü–∞ –¥–ª—è ${user} —É–∂–µ –≤ –ø—É—Ç–∏! üöóüí®`;
    timerText.textContent = `–û—Å—Ç–∞–ª–æ—Å—å: ${timeLeft} —Å–µ–∫`;
    const interval = setInterval(() => {
      timeLeft--;
      timerText.textContent = `–û—Å—Ç–∞–ª–æ—Å—å: ${timeLeft} —Å–µ–∫`;
      if (timeLeft <= 0) {
        clearInterval(interval);
        finishDelivery(user);
      }
    }, 1000);
  }

  function finishDelivery(user) {
    deliveryMenu.classList.add("hidden");
    promoMenu.classList.remove("hidden");
    if (orders > 0) orders -= 1;
    delivered += 20;
    gotFreePizza = true;
    localStorage.setItem("orders", orders);
    localStorage.setItem("delivered", delivered);
    localStorage.setItem("gotFreePizza", "true");
    addHistory(`–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ 20 –ø–∏—Ü—Ü –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${user}`);
    updateOrders();
    dingSound.play();
  }

  applyPromo.addEventListener("click", () => {
    const code = promoInput.value.trim().toLowerCase();
    if (code === "dox") {
      if (promoUsed) {
        promoMsg.textContent = "‚ö†Ô∏è –≠—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!";
        promoMsg.className = "error";
      } else {
        orders += 1;
        promoUsed = true;
        localStorage.setItem("orders", orders);
        localStorage.setItem("promoUsed", "true");
        promoMsg.textContent = "‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω! +1 –∑–∞–∫–∞–∑ –ø–∏—Ü—Ü—ã üçï";
        promoMsg.className = "success";
        addHistory("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–æ–º–æ–∫–æ–¥ dox (+1 –∑–∞–∫–∞–∑)");
        dingSound.play();
        updateOrders();
      }
    } else if (code === "") {
      promoMsg.textContent = "–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥!";
      promoMsg.className = "error";
    } else {
      promoMsg.textContent = "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥!";
      promoMsg.className = "error";
    }
  });

  backBtn.addEventListener("click", () => {
    promoMenu.classList.add("hidden");
    mainMenu.classList.remove("hidden");
    updateOrders();
  });

  // –ø–ª–∞–≤–∞—é—â–∏–µ –ø–∏—Ü—Ü—ã –Ω–∞ —Ñ–æ–Ω–µ
  for (let i = 0; i < 15; i++) {
    const pizza = document.createElement("div");
    pizza.textContent = "üçï";
    pizza.style.position = "fixed";
    pizza.style.left = Math.random() * 100 + "vw";
    pizza.style.top = Math.random() * 100 + "vh";
    pizza.style.fontSize = Math.random() * 30 + 20 + "px";
    pizza.style.opacity = "0.3";
    pizza.style.animation = `float${i} ${10 + Math.random() * 10}s linear infinite`;
    const anim = document.createElement("style");
    anim.textContent = `
      @keyframes float${i} {
        0% { transform: translateY(0); }
        50% { transform: translateY(-20px) rotate(${Math.random()*30}deg); }
        100% { transform: translateY(0); }
      }`;
    document.head.appendChild(anim);
    document.body.appendChild(pizza);
  }
</script>
</body>
</html>
